graph TB
    subgraph "SQL Wire Protocol Architecture"
        Client[ðŸ“± Database Client]
        Driver[ðŸ”§ Database Driver]
        ConnPool[ðŸ”„ Connection Pool]
        Proxy[ðŸ”€ Database Proxy]
        Primary[ðŸ—„ï¸ Primary Database]
        Replica[ðŸ“– Read Replica]
        
        subgraph "Protocol Stack"
            App[ðŸ”§ Application Layer]
            Wire[ðŸ“¡ Wire Protocol]
            TCP[ðŸŒ TCP Transport]
            TLS[ðŸ”’ TLS Security]
        end
        
        subgraph "MySQL Protocol"
            MySQLHandshake[ðŸ¤ Handshake]
            MySQLAuth[ðŸ” Authentication]
            MySQLQuery[â“ Query/Response]
            MySQLPrepared[ðŸ“ Prepared Statements]
        end
        
        subgraph "PostgreSQL Protocol"
            PGStartup[ðŸš€ Startup Message]
            PGAuth[ðŸ”‘ Auth Flow]
            PGSimple[ðŸ“‹ Simple Query]
            PGExtended[ðŸ”§ Extended Query]
        end
        
        subgraph "SQL Server TDS"
            TDSLogin[ðŸ”‘ TDS Login]
            TDSBatch[âš¡ SQL Batch]
            TDSBulk[ðŸ“¦ Bulk Copy]
            TDSResponse[ðŸ“¨ TDS Response]
        end
    end
    
    subgraph "Connection Management"
        PoolConfig[âš™ï¸ Pool Configuration]
        ConnValidation[âœ… Connection Validation]
        LoadBalancing[âš–ï¸ Load Balancing]
        Failover[ðŸ”„ Failover]
    end
    
    subgraph "Performance Features"
        BinaryProtocol[âš¡ Binary Encoding]
        PreparedStmts[ðŸ“ Prepared Statements]
        ConnReuse[ðŸ”„ Connection Reuse]
        Pipelining[ðŸš€ Query Pipelining]
    end
    
    subgraph "Security Features"
        Authentication[ðŸ” Authentication]
        Encryption[ðŸ”’ TLS/SSL]
        Authorization[ðŸ›¡ï¸ Authorization]
        AuditLogging[ðŸ“Š Audit Logging]
    end
    
    %% Flow connections
    Client --> Driver
    Driver --> ConnPool
    ConnPool --> Proxy
    Proxy --> Primary
    Proxy --> Replica
    
    %% Protocol stack
    App --> Wire
    Wire --> TCP
    TCP --> TLS
    
    %% MySQL protocol flow
    MySQLHandshake --> MySQLAuth
    MySQLAuth --> MySQLQuery
    MySQLQuery --> MySQLPrepared
    
    %% PostgreSQL protocol flow
    PGStartup --> PGAuth
    PGAuth --> PGSimple
    PGSimple --> PGExtended
    
    %% TDS protocol flow
    TDSLogin --> TDSBatch
    TDSBatch --> TDSBulk
    TDSBulk --> TDSResponse
    
    %% Connection management
    ConnPool --> PoolConfig
    ConnPool --> ConnValidation
    Proxy --> LoadBalancing
    LoadBalancing --> Failover
    
    %% Performance features
    Wire --> BinaryProtocol
    Wire --> PreparedStmts
    ConnPool --> ConnReuse
    Wire --> Pipelining
    
    %% Security features
    Wire --> Authentication
    TLS --> Encryption
    Wire --> Authorization
    Wire --> AuditLogging
    
    %% Protocol connections
    MySQLHandshake --> Wire
    PGStartup --> Wire
    TDSLogin --> Wire
    
    %% Styling
    classDef clientClass fill:#e1f5fe
    classDef protocolClass fill:#f3e5f5
    classDef databaseClass fill:#e8f5e8
    classDef performanceClass fill:#fff3e0
    classDef securityClass fill:#ffebee
    
    class Client,Driver,ConnPool clientClass
    class Wire,TCP,TLS,MySQLHandshake,MySQLAuth,MySQLQuery,MySQLPrepared protocolClass
    class Primary,Replica,PGStartup,PGAuth,PGSimple,PGExtended databaseClass
    class BinaryProtocol,PreparedStmts,ConnReuse,Pipelining performanceClass
    class Authentication,Encryption,Authorization,AuditLogging securityClass
